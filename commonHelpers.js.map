{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43827798-4b15de3508f50a47656d425a7';\n\nexport async function fetchData(query, page, perPage) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            per_page: perPage,\n            page: page,\n            safesearch: true,\n            orientation: 'horizontal'\n        }\n    });\n    return response.data;\n}\n","import iziToast from \"izitoast\";\n\nexport function renderGallery(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map((hit) => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${hit.largeImageURL}\" download=false>\n                <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-img\" width=360 onclick=\"return false\" data-source=\"${hit.largeImageURL}\">\n                <ul class=\"description\">\n                    <li>\n                        <p>Likes</p>\n                        <p class=\"description-value\">${hit.likes}</p>\n                    </li>\n                    <li>\n                        <p>Views</p>\n                        <p class=\"description-value\">${hit.views}</p>\n                    </li>\n                    <li>\n                        <p>Comments</p>\n                        <p class=\"description-value\">${hit.comments}</p>\n                    </li>\n                    <li>\n                        <p>Downloads</p>\n                        <p class=\"description-value\">${hit.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>\n        `;\n    }).join(\"\");\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showMessage(message) {\n    iziToast.show({ message });\n}\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.remove('visually-hidden');\n}\n\nexport function hideLoader() {\n    document.querySelector('.loader').classList.add('visually-hidden');\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchData } from \"./js/pixabay-api\";\nimport { renderGallery, showMessage, showLoader, hideLoader } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst queryInput = document.querySelector('input[name=\"query\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\niziToast.settings({\n    messageColor: '#fafafb',\n    position: 'topRight',\n    backgroundColor: '#ef4040',\n    iconColor: '#fafafb',\n    close: false\n});\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet images;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = queryInput.value.trim();\n    if (query === '') {\n        showMessage('Please enter a search query.');\n        return;\n    }\n    loadMoreBtn.classList.add('visually-hidden');\n    gallery.innerHTML = '';\n    page = 1;\n\n    showLoader();\n\n    try {\n        images = await fetchData(query, page, perPage);\n        if (images.hits.length === 0) {\n            showMessage('Sorry, there are no images matching your search query. Please try again!');\n            hideLoader();\n            console.log(\"ðŸš€ ~ form.addEventListener ~ images.hits.length:\", images.hits.length)\n            return;\n        }\n\n        if (images.hits.length < 15) {\n            loadMoreBtn.classList.add('visually-hidden');\n        } else {\n            loadMoreBtn.classList.remove('visually-hidden');\n        }\n        renderGallery(images.hits);\n        lightbox.refresh();\n    } catch (error) {\n        console.log(error);\n    } finally {\n        hideLoader();\n        form.reset();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    \n    page += 1;\n    try {\n        loadMoreBtn.classList.add('visually-hidden');\n        showLoader();\n\n        images = await fetchData(query, page, perPage);\n        renderGallery(images.hits);\n        lightbox.refresh();\n        \n        const galleryCard = document.querySelector('.gallery-item').getBoundingClientRect();\n        const cardHeight = galleryCard.height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n        if (images.total <= Math.ceil(page * perPage)) {\n            loadMoreBtn.classList.add('visually-hidden');\n            showMessage(\"We're sorry, but you've reached the end of search results.\");\n            return;\n        }\n        loadMoreBtn.classList.remove('visually-hidden');\n    } catch (error) {\n        console.log(error);\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["BASE_URL","API_KEY","fetchData","query","page","perPage","axios","renderGallery","images","gallery","markup","hit","showMessage","message","iziToast","showLoader","hideLoader","form","queryInput","loadMoreBtn","lightbox","SimpleLightbox","event","error","cardHeight"],"mappings":"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"}